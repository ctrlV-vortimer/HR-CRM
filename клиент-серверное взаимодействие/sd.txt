@startuml
actor Пользователь
participant Клиент
participant Сервер
participant БД

Пользователь -> Клиент : Переход на экран управления заявками
activate Клиент
Клиент -> Сервер : Запрос на получение списка заявок \nGET /applications
activate Сервер


alt ошибка сервера
  Сервер -> Сервер : Ошибка при обработке запроса
  Сервер --> Клиент : Возвращение ответа со статус кодом \n500 Internal Server Error
  Клиент --> Пользователь : Уведомление об ошибке сервера

else ошибка авторизации
  Сервер -> Сервер : Проверка авторизации
  Сервер --> Клиент : Возвращение ответа со статус кодом \n401 Unauthorized
  Клиент --> Пользователь : Уведомление о необходимости \nавторизации

else ошибка валидации
  Сервер -> Сервер : Проверка авторизации
  Сервер -> Сервер : Валидация запроса
  Сервер --> Клиент : Возвращение ответа со статус кодом \n400 Bad Request
  Клиент --> Пользователь : Уведомление о некорректных данных

else ошибка отсутствия ресурса
  Сервер -> Сервер : Проверка авторизации
  Сервер -> Сервер : Валидация запроса
  Сервер -> БД : Запрос данных заявок
  activate БД
  БД --> Сервер : Возвращение пустого ответа
  deactivate БД
  Сервер --> Клиент : Возвращение ответа со статус кодом \n404 Not Found
  Клиент --> Пользователь : Уведомление об отсутствии заявок

else отображение списка заявок
  Сервер -> Сервер : Проверка авторизации
  Сервер -> Сервер : Валидация запроса
  Сервер -> БД : Запрос данных заявок
  activate БД
  БД --> Сервер : Возвращение данных заявок
  deactivate БД
  Сервер --> Клиент : Возвращение ответа со статус кодом \n200 OK
  deactivate Сервер
  Клиент --> Пользователь : Отображение списка заявок
  deactivate Клиент
end

Пользователь -> Клиент : Создание новой заявки
activate Клиент
Клиент --> Пользователь : Отображение типов заявок
Пользователь -> Клиент : Выбор типа заявки
Клиент --> Пользователь : Отображение формы заявки
Пользователь -> Клиент : Заполнение полей формы
Пользователь -> Клиент : Сохранение заявки
Клиент -> Сервер : Запрос на создание заявки \nPOST /applications
activate Сервер


alt ошибка сервера
  Сервер -> Сервер : Ошибка при обработке запроса
  Сервер --> Клиент : Возвращение ответа со статус кодом \n500 Internal Server Error
  Клиент --> Пользователь : Уведомление об ошибке сервера

else ошибка авторизации
  Сервер -> Сервер : Проверка авторизации
  Сервер --> Клиент : Возвращение ответа со статус кодом \n401 Unauthorized
  Клиент --> Пользователь : Уведомление о необходимости \nавторизации

else ошибка валидации
  Сервер -> Сервер : Проверка авторизации
  Сервер -> Сервер : Валидация запроса
  Сервер --> Клиент : Возвращение ответа со статус кодом \n400 Bad Request
  Клиент --> Пользователь : Уведомление о некорректных данных \nили не заполненых обязательных полях

else сохранение заявки
  Сервер -> Сервер : Проверка авторизации
  Сервер -> Сервер : Валидация запроса
  Сервер -> БД : Сохранение заявки
  activate БД
  БД --> Сервер : Подтверждение сохранения
  deactivate БД
  Сервер --> Клиент : Возвращение ответа со статус кодом \n201 Created
  deactivate Сервер
  Клиент --> Пользователь : Уведомление об успешном создании \nзаявки
  deactivate Клиент
end

Пользователь -> Клиент : Выбор заявки из списка
activate Клиент
Клиент -> Сервер : Запрос на получение данных заявки \nGET /applications/{application_id}
activate Сервер

alt ошибка сервера
  Сервер -> Сервер : Ошибка при обработке запроса
  Сервер --> Клиент : Возвращение ответа со статус кодом \n500 Internal Server Error
  Клиент --> Пользователь : Уведомление об ошибке сервера

else ошибка авторизации
  Сервер -> Сервер : Проверка авторизации
  Сервер --> Клиент : Возвращение ответа со статус кодом \n401 Unauthorized
  Клиент --> Пользователь : Уведомление о необходимости \nавторизации

else ошибка валидации
  Сервер -> Сервер : Проверка авторизации
  Сервер -> Сервер : Валидация запроса
  Сервер --> Клиент : Возвращение ответа со статус кодом \n400 Bad Request
  Клиент --> Пользователь : Уведомление о некорректных данных

else ошибка отсутствия ресурса
  Сервер -> Сервер : Проверка авторизации
  Сервер -> Сервер : Валидация запроса
  Сервер -> БД : Запрос данных заявки
  activate БД
  БД --> Сервер : Возвращение пустого ответа
  deactivate БД
  Сервер --> Клиент : Возвращение ответа со статус кодом \n404 Not Found
  Клиент --> Пользователь : Уведомление об отсутствии заявки

else отображение списка заявок
  Сервер -> Сервер : Проверка авторизации
  Сервер -> Сервер : Валидация запроса
  Сервер -> БД : Запрос данных заявки
  activate БД
  БД --> Сервер : Возвращение данных заявки
  deactivate БД
  Сервер --> Клиент : Возвращение ответа со статус кодом \n200 OK
  deactivate Сервер
  Клиент --> Пользователь : Отображение детальной \nинформации о заявке
  deactivate Клиент
end
@enduml